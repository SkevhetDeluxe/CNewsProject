@model AuthorArticlesVM

@*<vc:nameofcomponent parameter=#> </vc:nameofcomponent>*@


@{
    List<string> statuses = new() { "Pending", "Approved", "Declined", "Draft" };
    List<string> h3Ids = new() { "PendingId", "ApprovedId", "DeclinedId", "DraftId" };
    List<string> colours = new() { "bg-primary", "bg-success", "bg-danger", "bg-secondary" };
    List<string> bColours = new() { "#006666", "#336600", "#b30000", "#999999" };
    List<string> Actions = new() { "EditArticle" , "Article"  , "EditArticle" , "EditArticle" };
    List<string> Controllers = new() { "Journalist", "News", "Journalist", "Journalist" };
    List<Article> list = new();
    
    
    
    for (int i = 0; i < 4; i++)
    {
        <h3 style="cursor:pointer;" id="@h3Ids[i]">@statuses[i]</h3>
        <div id="@statuses[i]" style="overflow:auto; max-height:200px; border: @bColours[i] 4px solid;" class="mb-4 @colours[i]">
            @{
                list = (List<Article>)Model.GetType().GetProperty(statuses[i])!.GetValue(Model)!;

                if (list.Count == 0)
                {
                    <h4>You have no @statuses[i] Articles</h4>
                }
                else
                {
                    int articleNum = 1;
                    foreach (var article in (List<Article>)Model.GetType().GetProperty(statuses[i])!.GetValue(Model)!)
                    {
                        if (articleNum % 2 == 0)
                        {
                            <div class="p-2" style="background: rgba(0, 0, 0, 0.14);">
                                <h4 class="pb-1 pt-1 m-0 c-link-hover-container">@articleNum : <a style="color: black;" class="c-link-hover" asp-controller="@Controllers[i]" asp-action="@Actions[i]" asp-route-id="@article.Id">@article.Headline</a></h4>
                            </div>
                        }
                        else
                        {
                            <div class="p-2">
                                <h4 class="pb-1 pt-1 m-0  c-link-hover-container">@articleNum : <a style="color: black;" class="c-link-hover" asp-controller="@Controllers[i]" asp-action="@Actions[i]" asp-route-id="@article.Id">@article.Headline</a></h4>
                            </div>
                        }
                        articleNum++;
                    }
                }
            }
        </div>
    }
}

<script type="text/javascript">
    
    document.addEventListener("DOMContentLoaded", function (){
        const pendingElem = @h3Ids[0];
        const approvedElem = @h3Ids[1];
        const declinedElem = @h3Ids[2];
        const draftElem = @h3Ids[3];
        
        pendingElem.addEventListener('click', function () {
            ToggleDiv(@statuses[0]);
        });
        approvedElem.addEventListener('click', function () {
            ToggleDiv(@statuses[1]);
        });
        declinedElem.addEventListener('click', function () {
            ToggleDiv(@statuses[2]);
        });
        draftElem.addEventListener('click', function () {
            ToggleDiv(@statuses[3]);
        });
    });
    
    function ToggleDiv(element){
        if (element.style.display == "none"){
            element.style.display = "block";
        }
        else{
            element.style.display = "none";
        }
    }
    
</script>